-- ‚úÖ AGREGAR COLUMNA FALTANTE EN PRODUCTOS
PROMPT 'üîß Agregando columna FECHA_CREACION a PRODUCTOS...'

ALTER TABLE PRODUCTOS 
ADD FECHA_CREACION DATE DEFAULT SYSDATE;

PROMPT '‚úÖ Columna FECHA_CREACION agregada exitosamente!'

-- Verificar la estructura actualizada
PROMPT 'üìã Verificando estructura de PRODUCTOS:'
DESC PRODUCTOS;

PROMPT 'üéØ ¬°Listo! Ahora puedes ejecutar la aplicaci√≥n Spring Boot.'







-- ‚úÖ AGREGAR TODAS LAS COLUMNAS FALTANTES DE UNA VEZ
PROMPT 'üîß Agregando todas las columnas faltantes...'

-- Para PRODUCTOS
BEGIN
    EXECUTE IMMEDIATE 'ALTER TABLE PRODUCTOS ADD FECHA_CREACION DATE DEFAULT SYSDATE';
    DBMS_OUTPUT.PUT_LINE('‚úÖ FECHA_CREACION agregada a PRODUCTOS');
EXCEPTION
    WHEN OTHERS THEN
        IF SQLCODE = -1430 THEN
            DBMS_OUTPUT.PUT_LINE('‚ö†Ô∏è FECHA_CREACION ya existe en PRODUCTOS');
        ELSE
            RAISE;
        END IF;
END;
/

-- Para PRODUCTOS - FECHA_MODIFICACION
BEGIN
    EXECUTE IMMEDIATE 'ALTER TABLE PRODUCTOS ADD FECHA_MODIFICACION DATE';
    DBMS_OUTPUT.PUT_LINE('‚úÖ FECHA_MODIFICACION agregada a PRODUCTOS');
EXCEPTION
    WHEN OTHERS THEN
        IF SQLCODE = -1430 THEN
            DBMS_OUTPUT.PUT_LINE('‚ö†Ô∏è FECHA_MODIFICACION ya existe en PRODUCTOS');
        ELSE
            RAISE;
        END IF;
END;
/

-- Para USUARIOS - FECHA_CREACION
BEGIN
    EXECUTE IMMEDIATE 'ALTER TABLE USUARIOS ADD FECHA_CREACION DATE DEFAULT SYSDATE';
    DBMS_OUTPUT.PUT_LINE('‚úÖ FECHA_CREACION agregada a USUARIOS');
EXCEPTION
    WHEN OTHERS THEN
        IF SQLCODE = -1430 THEN
            DBMS_OUTPUT.PUT_LINE('‚ö†Ô∏è FECHA_CREACION ya existe en USUARIOS');
        ELSE
            RAISE;
        END IF;
END;
/

-- Para PROVEEDORES - FECHA_CREACION
BEGIN
    EXECUTE IMMEDIATE 'ALTER TABLE PROVEEDORES ADD FECHA_CREACION DATE DEFAULT SYSDATE';
    DBMS_OUTPUT.PUT_LINE('‚úÖ FECHA_CREACION agregada a PROVEEDORES');
EXCEPTION
    WHEN OTHERS THEN
        IF SQLCODE = -1430 THEN
            DBMS_OUTPUT.PUT_LINE('‚ö†Ô∏è FECHA_CREACION ya existe en PROVEEDORES');
        ELSE
            RAISE;
        END IF;
END;
/

-- Para PROVEEDORES - FECHA_MODIFICACION
BEGIN
    EXECUTE IMMEDIATE 'ALTER TABLE PROVEEDORES ADD FECHA_MODIFICACION DATE';
    DBMS_OUTPUT.PUT_LINE('‚úÖ FECHA_MODIFICACION agregada a PROVEEDORES');
EXCEPTION
    WHEN OTHERS THEN
        IF SQLCODE = -1430 THEN
            DBMS_OUTPUT.PUT_LINE('‚ö†Ô∏è FECHA_MODIFICACION ya existe en PROVEEDORES');
        ELSE
            RAISE;
        END IF;
END;
/

PROMPT 'üéØ ¬°Todas las columnas agregadas! Ahora ejecuta la aplicaci√≥n.'
