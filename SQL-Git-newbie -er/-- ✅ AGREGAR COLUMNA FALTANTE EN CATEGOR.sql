-- โ AGREGAR COLUMNA FALTANTE EN CATEGORIAS
PROMPT '๐ง Agregando columna FECHA_MODIFICACION a CATEGORIAS...'

ALTER TABLE CATEGORIAS 
ADD FECHA_MODIFICACION DATE;

PROMPT 'โ Columna FECHA_MODIFICACION agregada exitosamente!'

-- Verificar la estructura actualizada
PROMPT '๐ Verificando estructura de CATEGORIAS:'
DESC CATEGORIAS;

PROMPT '๐ฏ ยกListo! Ahora puedes ejecutar la aplicaciรณn Spring Boot.'



-- โ VERIFICAR Y AGREGAR TODAS LAS COLUMNAS FALTANTES
PROMPT '๐ Verificando columnas faltantes en todas las tablas...'

-- Verificar CATEGORIAS
SELECT 'CATEGORIAS' as TABLA, COLUMN_NAME 
FROM USER_TAB_COLUMNS 
WHERE TABLE_NAME = 'CATEGORIAS'
ORDER BY COLUMN_ID;

-- Verificar PRODUCTOS  
SELECT 'PRODUCTOS' as TABLA, COLUMN_NAME 
FROM USER_TAB_COLUMNS 
WHERE TABLE_NAME = 'PRODUCTOS'
ORDER BY COLUMN_ID;

-- Verificar USUARIOS
SELECT 'USUARIOS' as TABLA, COLUMN_NAME 
FROM USER_TAB_COLUMNS 
WHERE TABLE_NAME = 'USUARIOS'
ORDER BY COLUMN_ID;

-- Verificar PROVEEDORES
SELECT 'PROVEEDORES' as TABLA, COLUMN_NAME 
FROM USER_TAB_COLUMNS 
WHERE TABLE_NAME = 'PROVEEDORES'
ORDER BY COLUMN_ID;

PROMPT '๐ Verificaciรณn completada. Revisa si faltan mรกs columnas.'



ALTER TABLE CATEGORIAS ADD FECHA_MODIFICACION DATE;







-- โ Verificaciรณn rรกpida antes de iniciar la aplicaciรณn
SELECT 'CATEGORIAS - OK' as TABLA, COUNT(*) as REGISTROS FROM CATEGORIAS
UNION ALL
SELECT 'PRODUCTOS - OK' as TABLA, COUNT(*) as REGISTROS FROM PRODUCTOS  
UNION ALL
SELECT 'USUARIOS - OK' as TABLA, COUNT(*) as REGISTROS FROM USUARIOS
UNION ALL
SELECT 'PROVEEDORES - OK' as TABLA, COUNT(*) as REGISTROS FROM PROVEEDORES;

-- ๐ Verificar que todas las columnas existen
SELECT 'FECHA_MODIFICACION en CATEGORIAS' as VERIFICACION, 
       CASE WHEN COUNT(*) > 0 THEN 'โ EXISTE' ELSE 'โ FALTA' END as ESTADO
FROM USER_TAB_COLUMNS 
WHERE TABLE_NAME = 'CATEGORIAS' AND COLUMN_NAME = 'FECHA_MODIFICACION';

PROMPT '๐ ยกBase de datos lista! Ejecuta: gradlew bootRun'
