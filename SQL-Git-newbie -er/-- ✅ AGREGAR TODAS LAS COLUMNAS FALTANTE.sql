-- ‚úÖ AGREGAR TODAS LAS COLUMNAS FALTANTES EN PRODUCTOS
PROMPT 'üîß Agregando TODAS las columnas faltantes en PRODUCTOS...'

-- PRECIO_COMPRA
BEGIN
    EXECUTE IMMEDIATE 'ALTER TABLE PRODUCTOS ADD PRECIO_COMPRA NUMBER(10,2)';
    DBMS_OUTPUT.PUT_LINE('‚úÖ PRECIO_COMPRA agregada');
EXCEPTION
    WHEN OTHERS THEN
        IF SQLCODE = -1430 THEN
            DBMS_OUTPUT.PUT_LINE('‚ö†Ô∏è PRECIO_COMPRA ya existe');
        ELSE
            RAISE;
        END IF;
END;
/

-- FECHA_CREACION
BEGIN
    EXECUTE IMMEDIATE 'ALTER TABLE PRODUCTOS ADD FECHA_CREACION DATE DEFAULT SYSDATE';
    DBMS_OUTPUT.PUT_LINE('‚úÖ FECHA_CREACION agregada');
EXCEPTION
    WHEN OTHERS THEN
        IF SQLCODE = -1430 THEN
            DBMS_OUTPUT.PUT_LINE('‚ö†Ô∏è FECHA_CREACION ya existe');
        ELSE
            RAISE;
        END IF;
END;
/

-- FECHA_MODIFICACION
BEGIN
    EXECUTE IMMEDIATE 'ALTER TABLE PRODUCTOS ADD FECHA_MODIFICACION DATE';
    DBMS_OUTPUT.PUT_LINE('‚úÖ FECHA_MODIFICACION agregada');
EXCEPTION
    WHEN OTHERS THEN
        IF SQLCODE = -1430 THEN
            DBMS_OUTPUT.PUT_LINE('‚ö†Ô∏è FECHA_MODIFICACION ya existe');
        ELSE
            RAISE;
        END IF;
END;
/

-- REQUIERE_REFRIGERACION (como NUMBER para boolean)
BEGIN
    EXECUTE IMMEDIATE 'ALTER TABLE PRODUCTOS ADD REQUIERE_REFRIGERACION NUMBER(1) DEFAULT 0';
    DBMS_OUTPUT.PUT_LINE('‚úÖ REQUIERE_REFRIGERACION agregada');
EXCEPTION
    WHEN OTHERS THEN
        IF SQLCODE = -1430 THEN
            DBMS_OUTPUT.PUT_LINE('‚ö†Ô∏è REQUIERE_REFRIGERACION ya existe');
        ELSE
            RAISE;
        END IF;
END;
/

-- ES_PERECEDERO (como NUMBER para boolean)
BEGIN
    EXECUTE IMMEDIATE 'ALTER TABLE PRODUCTOS ADD ES_PERECEDERO NUMBER(1) DEFAULT 0';
    DBMS_OUTPUT.PUT_LINE('‚úÖ ES_PERECEDERO agregada');
EXCEPTION
    WHEN OTHERS THEN
        IF SQLCODE = -1430 THEN
            DBMS_OUTPUT.PUT_LINE('‚ö†Ô∏è ES_PERECEDERO ya existe');
        ELSE
            RAISE;
        END IF;
END;
/

-- EN_PROMOCION (como NUMBER para boolean)
BEGIN
    EXECUTE IMMEDIATE 'ALTER TABLE PRODUCTOS ADD EN_PROMOCION NUMBER(1) DEFAULT 0';
    DBMS_OUTPUT.PUT_LINE('‚úÖ EN_PROMOCION agregada');
EXCEPTION
    WHEN OTHERS THEN
        IF SQLCODE = -1430 THEN
            DBMS_OUTPUT.PUT_LINE('‚ö†Ô∏è EN_PROMOCION ya existe');
        ELSE
            RAISE;
        END IF;
END;
/

PROMPT 'üìã Verificando estructura final de PRODUCTOS:'
DESC PRODUCTOS;

PROMPT 'üéØ ¬°TODAS las columnas agregadas! Ahora ejecuta la aplicaci√≥n.'











-- üöÄ SOLUCI√ìN R√ÅPIDA - TODAS LAS COLUMNAS DE UNA VEZ
ALTER TABLE PRODUCTOS ADD (
    PRECIO_COMPRA NUMBER(10,2),
    FECHA_CREACION DATE DEFAULT SYSDATE,
    FECHA_MODIFICACION DATE,
    REQUIERE_REFRIGERACION NUMBER(1) DEFAULT 0,
    ES_PERECEDERO NUMBER(1) DEFAULT 0,
    EN_PROMOCION NUMBER(1) DEFAULT 0
);

PROMPT '‚úÖ ¬°Todas las columnas agregadas de una vez!'
